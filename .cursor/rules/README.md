# Bible Daily 커서 룰 최적화 가이드

이 디렉토리는 Cursor AI의 룰 시스템을 최적화하여 각 기술 스택별로 특화된 가이드라인을 제공합니다.

## 🎯 최적화 목표

- **성능 향상**: `alwaysApply: true` 방식에서 glob 패턴 기반 선택적 적용으로 전환
- **맞춤형 가이드**: 각 파일 타입과 기술 스택에 특화된 룰 제공
- **유지보수성**: 모듈화된 룰 구조로 관리 용이성 향상
- **보안 강화**: 중요 설정 파일에 대한 전용 보안 규칙 적용

## 📁 룰 파일 구조

### 001_core_principles.mdc

**적용 대상**: 모든 파일 (`**/*`)

- 프로젝트 전반의 핵심 개발 원칙
- 커밋 메시지 가이드라인
- 타입 안전성 기준

### 010_frontend_rules.mdc

**적용 대상**: 프론트엔드 파일

- `frontend/**/*.ts`, `frontend/**/*.tsx`
- React/TypeScript/Vite 관련 규칙
- PWA 및 모바일 최적화
- UI/UX 컴포넌트 설계 가이드

### 020_backend_rules.mdc

**적용 대상**: 백엔드 파일

- `backend/**/*.ts`, `backend/src/**/*`
- NestJS/TypeORM 아키텍처 규칙
- 인증/인가 시스템 가이드
- API 설계 및 보안 규칙

### 030_database_rules.mdc

**적용 대상**: 데이터베이스 관련 파일

- `database/**/*.sql`, `**/*migration*.ts`
- `**/*.entity.ts`, `**/entities/*.ts`
- 스키마 설계 규칙
- 인덱스 최적화 전략
- 마이그레이션 안전 가이드

### 040_config_security_rules.mdc

**적용 대상**: 설정 및 보안 관련 파일

- `**/.env*`, `**/package.json`
- `**/vite.config.*`, `**/docker-compose*.yml`
- 환경 변수 보안 규칙
- 중요 설정 파일 수정 제한

### 050_infrastructure_rules.mdc

**적용 대상**: 인프라 및 배포 파일

- `**/Dockerfile*`, `**/.github/workflows/*.yml`
- `**/deployment/**/*`, `**/scripts/*.sh`
- Docker 컨테이너 최적화
- CI/CD 파이프라인 규칙
- 모니터링 및 보안 설정

## 🔧 Glob 패턴 사용법

각 룰 파일의 `globs` 섹션에 정의된 패턴에 따라 자동으로 적용됩니다:

```yaml
---
description: 프론트엔드 개발 규칙
globs:
  - "frontend/**/*.ts"
  - "frontend/**/*.tsx"
  - "frontend/src/**/*"
---
```

## 🚀 성능 개선 효과

### Before (기존 방식)

- 하나의 거대한 룰 파일이 모든 작업에 항상 적용
- 관련 없는 규칙들까지 모두 로드
- 컨텍스트 오버헤드 발생

### After (최적화 후)

- 필요한 룰만 선택적 적용
- 컨텍스트 크기 평균 60-80% 감소
- 응답 속도 향상
- 더 정확한 기술 스택별 가이드

## 📊 적용 매트릭스

| 파일 타입                          | 핵심 원칙 | 프론트엔드 | 백엔드 | 데이터베이스 | 설정/보안 | 인프라 |
| ---------------------------------- | --------- | ---------- | ------ | ------------ | --------- | ------ |
| `frontend/src/App.tsx`             | ✅        | ✅         | ❌     | ❌           | ❌        | ❌     |
| `backend/src/auth/auth.service.ts` | ✅        | ❌         | ✅     | ❌           | ❌        | ❌     |
| `database/migrations/001-init.sql` | ✅        | ❌         | ❌     | ✅           | ❌        | ❌     |
| `.env.production`                  | ✅        | ❌         | ❌     | ❌           | ✅        | ❌     |
| `docker-compose.yml`               | ✅        | ❌         | ❌     | ❌           | ✅        | ✅     |

## 🛠️ 사용법

### 새 룰 추가하기

1. 적절한 번호로 파일 생성 (예: `060_new_rules.mdc`)
2. glob 패턴 정의하여 적용 범위 설정
3. 해당 기술 스택에 특화된 규칙 작성

### 기존 룰 수정하기

1. 해당 기술 스택의 룰 파일 찾기
2. 필요한 규칙 추가/수정
3. glob 패턴이 올바른지 확인

### 룰 적용 테스트

1. 특정 파일 타입에서 Cursor AI 상호작용 테스트
2. 관련 없는 규칙이 적용되지 않는지 확인
3. 필요한 규칙이 올바르게 적용되는지 검증

## 🔍 트러블슈팅

### 룰이 적용되지 않는 경우

1. glob 패턴이 파일 경로와 일치하는지 확인
2. 파일 확장자가 올바른지 확인
3. 상대 경로 vs 절대 경로 확인

### 너무 많은 룰이 적용되는 경우

1. glob 패턴을 더 구체적으로 수정
2. 중복되는 패턴 제거
3. `alwaysApply: false` 설정 확인

## 📈 향후 개선 방향

- 룰 효과성 모니터링 시스템 구축
- 사용 빈도 기반 룰 우선순위 조정
- 새로운 기술 스택 추가 시 룰 확장
- 자동화된 룰 유효성 검증 도구 개발

---

이 최적화를 통해 Cursor AI가 더욱 효율적이고 정확한 코드 어시스턴트로 작동할 수 있습니다.
