<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title>Bible Daily - ì„±ê²½ë§ì”€ ì†Œê° ê³µìœ </title>

    <!-- PWA ë§¤ë‹ˆí˜ìŠ¤íŠ¸ -->
    <link rel="manifest" href="/manifest.json" />

    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <meta name="theme-color" content="#f97316" />
    <meta
      name="description"
      content="ì¤‘ê³ ë“±í•™ìƒì„ ìœ„í•œ ì„±ê²½ë§ì”€ ì†Œê° ê³µìœ  í”Œë«í¼"
    />

    <!-- iOS Safari PWA ì§€ì› -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="default" />
    <meta name="apple-mobile-web-app-title" content="Bible Daily" />
    <link rel="apple-touch-icon" href="/vite.svg" />

    <!-- ì¸ì•± ë¸Œë¼ìš°ì € ìš°íšŒ ìŠ¤í¬ë¦½íŠ¸ -->
    <script type="text/javascript">
      (function () {
        var inappdeny_exec_vanillajs = function (callback) {
          if (document.readyState !== "loading") {
            callback();
          } else {
            document.addEventListener("DOMContentLoaded", callback);
          }
        };

        inappdeny_exec_vanillajs(function () {
          var useragt = navigator.userAgent.toLowerCase();
          var target_url = window.location.href;

          function copytoclipboard(val) {
            try {
              if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(val);
                return true;
              }

              var t = document.createElement("textarea");
              document.body.appendChild(t);
              t.value = val;
              t.select();
              document.execCommand("copy");
              document.body.removeChild(t);
              return true;
            } catch (e) {
              console.error("í´ë¦½ë³´ë“œ ë³µì‚¬ ì‹¤íŒ¨:", e);
              return false;
            }
          }

          function inappbrowserout() {
            copytoclipboard(window.location.href);
            alert(
              "URLì£¼ì†Œê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.\nì™¸ë¶€ ë¸Œë¼ìš°ì €(Safari/Chrome)ë¥¼ ì—´ì–´ì„œ ì£¼ì†Œì°½ì— ë¶™ì—¬ë„£ê¸° í•˜ì—¬ ì ‘ì†í•´ì£¼ì„¸ìš”."
            );

            if (useragt.match(/iphone|ipad|ipod/i)) {
              // iOS - Safari ì‹¤í–‰ ì‹œë„
              try {
                window.location.href = "x-web-search://?";
              } catch (e) {
                console.log("Safari ì‹¤í–‰ ì‹¤íŒ¨");
              }
            } else {
              // Android - Chrome ì‹¤í–‰
              try {
                var cleanUrl = target_url.replace(/https?:\/\//i, "");
                window.location.href =
                  "intent://" +
                  cleanUrl +
                  "#Intent;scheme=http;package=com.android.chrome;end";
              } catch (e) {
                console.log("Chrome ì‹¤í–‰ ì‹¤íŒ¨");
              }
            }
          }

          // ì¹´ì¹´ì˜¤í†¡ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ ë° ìš°íšŒ
          if (useragt.match(/kakaotalk/i)) {
            try {
              // ì¹´ì¹´ì˜¤í†¡ ì™¸ë¶€ ë¸Œë¼ìš°ì € ì—´ê¸° ìŠ¤í‚´ ì‚¬ìš©
              window.location.href =
                "kakaotalk://web/openExternal?url=" +
                encodeURIComponent(target_url);
            } catch (e) {
              console.error("ì¹´ì¹´ì˜¤í†¡ ì™¸ë¶€ ë¸Œë¼ìš°ì € ì‹¤í–‰ ì‹¤íŒ¨:", e);
              setTimeout(inappbrowserout, 100);
            }
          }
          // ë¼ì¸ ì¸ì•± ë¸Œë¼ìš°ì € ê°ì§€ ë° ìš°íšŒ
          else if (useragt.match(/line/i)) {
            try {
              if (target_url.indexOf("?") !== -1) {
                window.location.href = target_url + "&openExternalBrowser=1";
              } else {
                window.location.href = target_url + "?openExternalBrowser=1";
              }
            } catch (e) {
              console.error("ë¼ì¸ ì™¸ë¶€ ë¸Œë¼ìš°ì € ì‹¤í–‰ ì‹¤íŒ¨:", e);
              setTimeout(inappbrowserout, 100);
            }
          }
          // ê¸°íƒ€ ì¸ì•± ë¸Œë¼ìš°ì €ë“¤
          else if (
            useragt.match(
              /inapp|naver|snapchat|wirtschaftswoche|thunderbird|instagram|everytimeapp|whatsapp|electron|wadiz|aliapp|zumapp|iphone(.*)whale|android(.*)whale|kakaostory|band|twitter|daumapps|daumdevice\/mobile|fb_iab|fb4a|fban|fbios|fbss|trill|samsungbrowser\/[^1]/i
            )
          ) {
            if (useragt.match(/iphone|ipad|ipod/i)) {
              // iOS - ìˆ˜ë™ ì•ˆë‚´ í˜ì´ì§€ í‘œì‹œ
              setTimeout(function () {
                var mobile = document.createElement("meta");
                mobile.name = "viewport";
                mobile.content =
                  "width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=no, minimal-ui";
                document.getElementsByTagName("head")[0].appendChild(mobile);

                var fonts = document.createElement("link");
                fonts.href =
                  "https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap";
                fonts.rel = "stylesheet";
                document.getElementsByTagName("head")[0].appendChild(fonts);

                document.body.innerHTML =
                  "<style>" +
                  "body{margin:0;padding:0;font-family: 'Noto Sans KR', sans-serif;overflow: hidden;height: 100vh;background:#f8f9fa;}" +
                  ".container{padding:20px;text-align:center;max-width:400px;margin:0 auto;}" +
                  ".icon{font-size:48px;margin:40px 0 20px 0;}" +
                  ".title{font-size:20px;font-weight:700;color:#333;margin-bottom:10px;line-height:1.4;}" +
                  ".description{font-size:16px;color:#666;margin-bottom:30px;line-height:1.5;}" +
                  ".button{min-width:200px;height:50px;background:#f97316;color:#fff;border:none;border-radius:8px;font-size:16px;font-weight:600;cursor:pointer;margin:10px;}" +
                  ".button:hover{background:#ea580c;}" +
                  ".steps{text-align:left;background:#fff;padding:20px;border-radius:12px;margin:20px 0;box-shadow:0 2px 8px rgba(0,0,0,0.1);}" +
                  ".steps h3{margin:0 0 15px 0;font-size:16px;color:#333;}" +
                  ".steps ol{margin:0;padding-left:20px;}" +
                  ".steps li{margin:8px 0;font-size:14px;color:#555;line-height:1.4;}" +
                  "</style>" +
                  "<div class='container'>" +
                  "<div class='icon'>ğŸ“±â¡ï¸ğŸŒ</div>" +
                  "<h2 class='title'>ì¸ì•±ë¸Œë¼ìš°ì € í˜¸í™˜ë¬¸ì œë¡œ ì¸í•´<br />Safarië¡œ ì ‘ì†í•´ì•¼í•©ë‹ˆë‹¤</h2>" +
                  "<p class='description'>ë” ë‚˜ì€ ì„œë¹„ìŠ¤ ì´ìš©ì„ ìœ„í•´<br />ì™¸ë¶€ ë¸Œë¼ìš°ì €ë¡œ ì ‘ì†í•´ì£¼ì„¸ìš”</p>" +
                  "<button onclick='inappbrowserout();' class='button'>Safarië¡œ ì—´ê¸°</button>" +
                  "<div class='steps'>" +
                  "<h3>ğŸ“‹ ì ‘ì† ë°©ë²•</h3>" +
                  "<ol>" +
                  "<li>ìœ„ ë²„íŠ¼ì„ ëˆŒëŸ¬ URL ë³µì‚¬</li>" +
                  "<li>Safari ë¸Œë¼ìš°ì € ì‹¤í–‰</li>" +
                  "<li>ì£¼ì†Œì°½ì„ ê¸¸ê²Œ í„°ì¹˜</li>" +
                  "<li>'ë¶™ì—¬ë„£ê¸° ë° ì´ë™' ì„ íƒ</li>" +
                  "</ol>" +
                  "</div>" +
                  "</div>";

                window.inappbrowserout = inappbrowserout;
              }, 500);
            } else {
              // Android - Chromeìœ¼ë¡œ ë°”ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
              setTimeout(function () {
                var cleanUrl = target_url.replace(/https?:\/\//i, "");
                window.location.href =
                  "intent://" +
                  cleanUrl +
                  "#Intent;scheme=http;package=com.android.chrome;end";
              }, 100);
            }
          }
        });
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
